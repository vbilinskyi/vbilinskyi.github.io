<a href="javascript:(function()%7Bif%20(window.ListSearcherInjected)%20return%3B%0A%0Awindow.ListSearcherInjected%20%3D%20true%3B%0A%0A%2F%2F%20Create%20and%20style%20the%20search%20panel%0Aconst%20panel%20%3D%20document.createElement('div')%3B%0Apanel.id%20%3D%20'list-searcher-panel'%3B%0Apanel.style.cssText%20%3D%20%60%0A%20%20%20%20%20%20%20%20position%3A%20fixed%3B%0A%20%20%20%20%20%20%20%20top%3A%2020px%3B%0A%20%20%20%20%20%20%20%20right%3A%2020px%3B%0A%20%20%20%20%20%20%20%20width%3A%20300px%3B%0A%20%20%20%20%20%20%20%20padding%3A%2010px%3B%0A%20%20%20%20%20%20%20%20background-color%3A%20%23f9f9f9%3B%0A%20%20%20%20%20%20%20%20border%3A%201px%20solid%20%23ccc%3B%0A%20%20%20%20%20%20%20%20border-radius%3A%205px%3B%0A%20%20%20%20%20%20%20%20box-shadow%3A%200%202px%208px%20rgba(0%2C0%2C0%2C0.2)%3B%0A%20%20%20%20%20%20%20%20z-index%3A%2010000%3B%0A%20%20%20%20%20%20%20%20font-family%3A%20Arial%2C%20sans-serif%3B%0A%20%20%20%20%20%20%20%20font-size%3A%2014px%3B%0A%20%20%20%20%60%3B%0A%0Apanel.innerHTML%20%3D%20%60%0A%20%20%20%20%20%20%20%20%3Cdiv%20style%3D%22display%3A%20flex%3B%20justify-content%3A%20space-between%3B%20align-items%3A%20center%3B%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Ch3%20style%3D%22margin%3A%200%3B%20font-size%3A%2016px%3B%22%3EList%20Searcher%3C%2Fh3%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22list-searcher-close%22%20style%3D%22background%3A%20none%3B%20border%3A%20none%3B%20font-size%3A%2016px%3B%20cursor%3A%20pointer%3B%22%3E%26times%3B%3C%2Fbutton%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%3Cinput%20type%3D%22text%22%20id%3D%22list-searcher-input%22%20placeholder%3D%22Enter%20list%20item%20(e.g.%2C%205.1)%22%20style%3D%22width%3A%20100%25%3B%20padding%3A%205px%3B%20margin-top%3A%2010px%3B%20box-sizing%3A%20border-box%3B%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20style%3D%22margin-top%3A%2010px%3B%20display%3A%20flex%3B%20justify-content%3A%20space-between%3B%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22list-searcher-prev%22%20disabled%3EPrevious%3C%2Fbutton%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22list-searcher-next%22%20disabled%3ENext%3C%2Fbutton%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20id%3D%22list-searcher-info%22%20style%3D%22margin-top%3A%2010px%3B%22%3E%3C%2Fdiv%3E%0A%20%20%20%20%60%3B%0Adocument.body.appendChild(panel)%3B%0A%0A%2F%2F%20Inject%20highlight%20styles%0Aconst%20style%20%3D%20document.createElement('style')%3B%0Astyle.textContent%20%3D%20%60%0A%20%20%20%20%20%20%20%20.list-searcher-highlight%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20background-color%3A%20yellow%20!important%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20border%3A%202px%20solid%20red%20!important%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%60%3B%0Adocument.head.appendChild(style)%3B%0A%0A%2F%2F%20Variables%20and%20functions%0Alet%20currentMatches%20%3D%20%5B%5D%3B%0Alet%20currentMatchIndex%20%3D%20-1%3B%0A%0Afunction%20getListItemNumber(item)%20%7B%0A%20%20let%20numbers%20%3D%20%5B%5D%3B%0A%20%20let%20current%20%3D%20item%3B%0A%20%20while%20(current%20%26%26%20current.tagName%20%3D%3D%3D%20'LI')%20%7B%0A%20%20%20%20let%20parentOl%20%3D%20current.closest('ol')%3B%0A%20%20%20%20if%20(parentOl)%20%7B%0A%20%20%20%20%20%20let%20children%20%3D%20Array.from(parentOl.children)%3B%0A%20%20%20%20%20%20numbers.unshift(children.indexOf(current)%20%2B%201)%3B%0A%20%20%20%20%20%20current%20%3D%20parentOl.parentElement%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20break%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20return%20numbers.join('.')%3B%0A%7D%0A%0Afunction%20indexLists()%20%7B%0A%20%20let%20listItems%20%3D%20document.querySelectorAll('ol%20li')%3B%0A%20%20let%20index%20%3D%20%7B%7D%3B%0A%20%20listItems.forEach((item)%20%3D%3E%20%7B%0A%20%20%20%20let%20number%20%3D%20getListItemNumber(item)%3B%0A%20%20%20%20if%20(number)%20%7B%0A%20%20%20%20%20%20if%20(!index%5Bnumber%5D)%20index%5Bnumber%5D%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20index%5Bnumber%5D.push(item)%3B%0A%20%20%20%20%7D%0A%20%20%7D)%3B%0A%20%20return%20index%3B%0A%7D%0A%0Aasync%20function%20highlightAndScrollToMatch()%20%7B%0A%20%20document.querySelectorAll('.list-searcher-highlight').forEach(el%20%3D%3E%20el.classList.remove('list-searcher-highlight'))%3B%0A%20%20if%20(currentMatches%5BcurrentMatchIndex%5D)%20%7B%0A%20%20%20%20const%20targetElement%20%3D%20currentMatches%5BcurrentMatchIndex%5D%3B%0A%20%20%20%20targetElement.classList.add('list-searcher-highlight')%3B%0A%0A%20%20%20%20const%20rect%20%3D%20targetElement.getBoundingClientRect()%3B%0A%20%20%20%20const%20targetScrollPosition%20%3D%20window.pageYOffset%20%2B%20rect.top%20-%20100%3B%0A%0A%20%20%20%20return%20new%20Promise((resolve)%20%3D%3E%20%7B%0A%20%20%20%20%20%20window.scrollTo(%7B%0A%20%20%20%20%20%20%20%20top%3A%20targetScrollPosition%2C%0A%20%20%20%20%20%20%20%20behavior%3A%20'smooth'%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20%2F%2F%20Use%20requestAnimationFrame%20to%20check%20when%20scrolling%20has%20finished%0A%20%20%20%20%20%20function%20checkScrollEnd()%20%7B%0A%20%20%20%20%20%20%20%20const%20currentPosition%20%3D%20window.pageYOffset%3B%0A%20%20%20%20%20%20%20%20if%20(Math.abs(currentPosition%20-%20targetScrollPosition)%20%3C%202)%20%7B%0A%20%20%20%20%20%20%20%20%20%20resolve()%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20requestAnimationFrame(checkScrollEnd)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20requestAnimationFrame(checkScrollEnd)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%7D%0A%0Afunction%20updateUI()%20%7B%0A%20%20const%20info%20%3D%20document.getElementById('list-searcher-info')%3B%0A%20%20const%20prevBtn%20%3D%20document.getElementById('list-searcher-prev')%3B%0A%20%20const%20nextBtn%20%3D%20document.getElementById('list-searcher-next')%3B%0A%0A%20%20if%20(currentMatches.length%20%3E%200)%20%7B%0A%20%20%20%20info.textContent%20%3D%20%60Match%20%24%7BcurrentMatchIndex%20%2B%201%7D%20of%20%24%7BcurrentMatches.length%7D%60%3B%0A%20%20%20%20prevBtn.disabled%20%3D%20currentMatchIndex%20%3C%3D%200%3B%0A%20%20%20%20nextBtn.disabled%20%3D%20currentMatchIndex%20%3E%3D%20currentMatches.length%20-%201%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20info.textContent%20%3D%20'No%20matches%20found'%3B%0A%20%20%20%20prevBtn.disabled%20%3D%20nextBtn.disabled%20%3D%20true%3B%0A%20%20%7D%0A%7D%0A%0Aconst%20listIndex%20%3D%20indexLists()%3B%0A%0A%2F%2F%20Helper%20function%20to%20debounce%20the%20search%0Afunction%20debounce(func%2C%20wait)%20%7B%0A%20%20let%20timeout%3B%0A%20%20return%20function%20executedFunction(...args)%20%7B%0A%20%20%20%20const%20later%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20clearTimeout(timeout)%3B%0A%20%20%20%20%20%20func(...args)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20clearTimeout(timeout)%3B%0A%20%20%20%20timeout%20%3D%20setTimeout(later%2C%20wait)%3B%0A%20%20%7D%3B%0A%7D%0A%0A%2F%2F%20Debounced%20search%20function%0Aconst%20debouncedSearch%20%3D%20debounce(async%20function(query)%20%7B%0A%20%20currentMatches%20%3D%20listIndex%5Bquery%5D%20%7C%7C%20%5B%5D%3B%0A%20%20currentMatchIndex%20%3D%20currentMatches.length%20%3E%200%20%3F%200%20%3A%20-1%3B%0A%20%20await%20highlightAndScrollToMatch()%3B%0A%20%20updateUI()%3B%0A%7D%2C%20300)%3B%0A%0A%2F%2F%20Update%20event%20listener%20to%20use%20debounced%20search%0Adocument.getElementById('list-searcher-input').addEventListener('input'%2C%20function()%20%7B%0A%20%20const%20query%20%3D%20this.value.trim()%3B%0A%20%20if%20(query)%20%7B%0A%20%20%20%20debouncedSearch(query)%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20%2F%2F%20Clear%20highlights%20if%20the%20input%20is%20empty%0A%20%20%20%20document.querySelectorAll('.list-searcher-highlight').forEach(el%20%3D%3E%20el.classList.remove('list-searcher-highlight'))%3B%0A%20%20%20%20updateUI()%3B%0A%20%20%7D%0A%7D)%3B%0A%0A%2F%2F%20Update%20event%20listener%20for%20input%20to%20use%20async%2Fawait%0Adocument.getElementById('list-searcher-input').addEventListener('keyup'%2C%20async%20function%20(e)%20%7B%0A%20%20if%20(e.key%20%3D%3D%3D%20'Enter')%20%7B%0A%20%20%20%20const%20query%20%3D%20this.value.trim()%3B%0A%20%20%20%20currentMatches%20%3D%20listIndex%5Bquery%5D%20%7C%7C%20%5B%5D%3B%0A%20%20%20%20currentMatchIndex%20%3D%20currentMatches.length%20%3E%200%20%3F%200%20%3A%20-1%3B%0A%20%20%20%20await%20highlightAndScrollToMatch()%3B%0A%20%20%20%20updateUI()%3B%0A%20%20%7D%0A%7D)%3B%0A%0A%2F%2F%20Update%20the%20next%20and%20previous%20button%20event%20listeners%0Adocument.getElementById('list-searcher-prev').addEventListener('click'%2C%20async%20function%20()%20%7B%0A%20%20if%20(currentMatchIndex%20%3E%200)%20%7B%0A%20%20%20%20currentMatchIndex--%3B%0A%20%20%20%20await%20highlightAndScrollToMatch()%3B%0A%20%20%20%20updateUI()%3B%0A%20%20%7D%0A%7D)%3B%0A%0Adocument.getElementById('list-searcher-next').addEventListener('click'%2C%20async%20function%20()%20%7B%0A%20%20if%20(currentMatchIndex%20%3C%20currentMatches.length%20-%201)%20%7B%0A%20%20%20%20currentMatchIndex%2B%2B%3B%0A%20%20%20%20await%20highlightAndScrollToMatch()%3B%0A%20%20%20%20updateUI()%3B%0A%20%20%7D%0A%7D)%3B%0A%0Adocument.getElementById('list-searcher-close').addEventListener('click'%2C%20function%20()%20%7B%0A%20%20panel.remove()%3B%0A%20%20style.remove()%3B%0A%20%20window.ListSearcherInjected%20%3D%20false%3B%0A%7D)%3B%7D)()%3B">List Searcher</a>
